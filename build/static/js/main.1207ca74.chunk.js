(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{22:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(17),o=n.n(r),i=(n(22),n(8)),a=n(3),u=n(4),s=n.n(u),j="/api/persons",d=function(){return s.a.get(j).then((function(e){return e.data}))},b=function(e){return s.a.post(j,e).then((function(e){return e.data}))},l=function(e,t){return s.a.put("".concat(j,"/").concat(e),t).then((function(e){return e.data}))},h=function(e){return s.a.delete("".concat(j,"/").concat(e))},f=n(0),O=function(e){var t=e.person,n=e.onRemove;return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:t.name}),Object(f.jsx)("td",{children:t.number}),Object(f.jsx)("td",{children:Object(f.jsx)("button",{onClick:function(){window.confirm("Delete ".concat(t.name,"?"))&&n(t.id)},children:"Delete"})})]})},m=function(e){var t=e.list,n=e.onRemove;return Object(f.jsx)("table",{children:Object(f.jsx)("tbody",{children:t.map((function(e){return Object(f.jsx)(O,{person:e,onRemove:n},e.id)}))})})},x=function(e){var t=e.filterName,n=e.setFilterName;return Object(f.jsxs)("div",{children:["Filter shown with"," ",Object(f.jsx)("input",{value:t,onChange:function(e){n(e.target.value)}})]})},p=function(e){var t=e.personNames,n=e.onSubmit,r=e.onChangeNumber,o=Object(c.useState)(""),i=Object(a.a)(o,2),u=i[0],s=i[1],j=Object(c.useState)(""),d=Object(a.a)(j,2),b=d[0],l=d[1];return Object(f.jsx)("form",{onSubmit:function(e){e.preventDefault();var c=u.trim();-1!==t.indexOf(c.toLowerCase())?window.confirm("".concat(c," is already added to the phonebook, replace the old number with the new one?"))&&r(c,b):n(c,b),s(""),l("")},children:Object(f.jsx)("table",{children:Object(f.jsxs)("tbody",{children:[Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:"Name:"}),Object(f.jsx)("td",{children:Object(f.jsx)("input",{pattern:"[a-zA-Z\\s]+",value:u,onChange:function(e){s(e.target.value)},required:!0})})]}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:"Number:"}),Object(f.jsx)("td",{children:Object(f.jsx)("input",{type:"tel",value:b,onChange:function(e){l(e.target.value)},pattern:"[0-9]{3}-[0-9]{3}-[0-9]{4}",placeholder:"000-000-0000",required:!0})})]}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{}),Object(f.jsx)("td",{children:Object(f.jsx)("button",{type:"submit",children:"Add"})})]})]})})})},v=function(e){var t=e.message,n=e.notificationType;return null===t?null:Object(f.jsx)("div",{className:n,children:t})},w=function(){var e=Object(c.useState)([]),t=Object(a.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(""),u=Object(a.a)(o,2),s=u[0],j=u[1],O=Object(c.useState)(null),w=Object(a.a)(O,2),g=w[0],C=w[1],N=Object(c.useState)(null),y=Object(a.a)(N,2),S=y[0],k=y[1];Object(c.useEffect)((function(){d().then((function(e){r(e)}))}),[]);var T=n.map((function(e){return e.name.toLowerCase()})),L=n.filter((function(e){return e.name.toLowerCase().match(s.toLowerCase())})),A=0===s.length?n:L;return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(x,{filterName:s,setFilterName:j}),Object(f.jsx)("h2",{children:"Add new"}),Object(f.jsx)(p,{personNames:T,onSubmit:function(e,t){b({name:e,number:t}).then((function(t){r(n.concat(t)),k("Added ".concat(e)),setTimeout((function(){k(null)}),5e3)})).catch((function(e){C(e)}))},onChangeNumber:function(e,t){var c=n.find((function(t){return t.name===e})),o=Object(i.a)(Object(i.a)({},c),{},{number:t});l(c.id,o).then((function(o){r(n.map((function(e){return e.id!==c.id?e:o}))),k("Changed number of ".concat(e," to ").concat(t)),setTimeout((function(){k(null)}),5e3)})).catch((function(){C("The person ".concat(c.name," was already deleted from the server")),setTimeout((function(){C(null)}),5e3),r(n.filter((function(e){return e.id!==c.id})))}))}}),Object(f.jsx)(v,{message:S,notificationType:"confirm"}),Object(f.jsx)(v,{message:g,notificationType:"error"}),Object(f.jsx)("h2",{children:"Contacts List"}),Object(f.jsx)(m,{list:A,onRemove:function(e){h(e).then((function(){r(n.filter((function(t){return t.id!==e})))})).catch((function(e){C(e)}))}})]})};o.a.render(Object(f.jsx)(w,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.1207ca74.chunk.js.map