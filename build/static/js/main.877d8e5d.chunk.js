(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{22:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var c=n(1),o=n(17),r=n.n(o),i=(n(22),n(8)),u=n(3),a=n(4),s=n.n(a),j="/api/persons",d=function(){return s.a.get(j).then((function(e){return e.data}))},l=function(e){return s.a.post(j,e).then((function(e){return e.data}))},b=function(e,t){return s.a.put("".concat(j,"/").concat(e),t).then((function(e){return e.data}))},f=function(e){return s.a.delete("".concat(j,"/").concat(e))},h=n(0),m=function(e){var t=e.person,n=e.onRemove;return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:t.name}),Object(h.jsx)("td",{children:t.number}),Object(h.jsx)("td",{children:Object(h.jsx)("button",{onClick:function(){window.confirm("Delete ".concat(t.name,"?"))&&n(t.id)},children:"Delete"})})]})},O=function(e){var t=e.list,n=e.onRemove;return Object(h.jsx)("table",{children:Object(h.jsx)("tbody",{children:t.map((function(e){return Object(h.jsx)(m,{person:e,onRemove:n},e.id)}))})})},x=function(e){var t=e.filterName,n=e.setFilterName;return Object(h.jsxs)("div",{children:["Filter shown with"," ",Object(h.jsx)("input",{value:t,onChange:function(e){n(e.target.value)}})]})},p=function(e){var t=e.personNames,n=e.onSubmit,o=e.onChangeNumber,r=Object(c.useState)(""),i=Object(u.a)(r,2),a=i[0],s=i[1],j=Object(c.useState)(""),d=Object(u.a)(j,2),l=d[0],b=d[1];return Object(h.jsx)("form",{onSubmit:function(e){e.preventDefault();var c=a.trim();-1!==t.indexOf(c.toLowerCase())?window.confirm("".concat(c," is already added to the phonebook, replace the old number with the new one?"))&&o(c,l):n(c,l),s(""),b("")},children:Object(h.jsx)("table",{children:Object(h.jsxs)("tbody",{children:[Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:"Name:"}),Object(h.jsx)("td",{children:Object(h.jsx)("input",{pattern:"[a-zA-Z\\s]+",value:a,onChange:function(e){s(e.target.value)},required:!0})})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:"Number:"}),Object(h.jsx)("td",{children:Object(h.jsx)("input",{type:"tel",value:l,onChange:function(e){b(e.target.value)},required:!0})})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{}),Object(h.jsx)("td",{children:Object(h.jsx)("button",{type:"submit",children:"Add"})})]})]})})})},v=function(e){var t=e.message,n=e.notificationType;return null===t?null:Object(h.jsx)("div",{className:n,children:t})},w=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],o=t[1],r=Object(c.useState)(""),a=Object(u.a)(r,2),s=a[0],j=a[1],m=Object(c.useState)(null),w=Object(u.a)(m,2),g=w[0],C=w[1],N=Object(c.useState)(null),y=Object(u.a)(N,2),T=y[0],S=y[1];Object(c.useEffect)((function(){d().then((function(e){o(e)}))}),[]);var k=n.map((function(e){return e.name.toLowerCase()})),L=n.filter((function(e){return e.name.toLowerCase().match(s.toLowerCase())})),R=0===s.length?n:L;return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Phonebook"}),Object(h.jsx)(x,{filterName:s,setFilterName:j}),Object(h.jsx)("h2",{children:"Add new"}),Object(h.jsx)(p,{personNames:k,onSubmit:function(e,t){l({name:e,number:t}).then((function(t){o(n.concat(t)),S("Added ".concat(e)),setTimeout((function(){S(null)}),5e3)})).catch((function(e){C(e.response.data.error),setTimeout((function(){C(null)}),5e3)}))},onChangeNumber:function(e,t){var c=n.find((function(t){return t.name===e})),r=Object(i.a)(Object(i.a)({},c),{},{number:t});b(c.id,r).then((function(r){o(n.map((function(e){return e.id!==c.id?e:r}))),S("Changed number of ".concat(e," to ").concat(t)),setTimeout((function(){S(null)}),5e3)})).catch((function(){C("The person ".concat(c.name," was already deleted from the server")),setTimeout((function(){C(null)}),5e3),o(n.filter((function(e){return e.id!==c.id})))}))}}),Object(h.jsx)(v,{message:T,notificationType:"confirm"}),Object(h.jsx)(v,{message:g,notificationType:"error"}),Object(h.jsx)("h2",{children:"Contacts List"}),Object(h.jsx)(O,{list:R,onRemove:function(e){f(e).then((function(){o(n.filter((function(t){return t.id!==e}))),S("Removed ".concat(e)),setTimeout((function(){S(null)}),5e3)})).catch((function(e){C(e),setTimeout((function(){C(null)}),5e3)}))}})]})};r.a.render(Object(h.jsx)(w,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.877d8e5d.chunk.js.map